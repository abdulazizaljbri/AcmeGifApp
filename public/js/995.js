(self.webpackChunk=self.webpackChunk||[]).push([[995],{1868:(n,e,t)=>{"use strict";t.d(e,{Z:()=>i});var o=t(4015),r=t.n(o),s=t(3645),a=t.n(s)()(r());a.push([n.id,".text-lg{font-size:1.125rem;line-height:1.75rem}.font-medium{font-weight:500}.text-sm{font-size:.875rem;line-height:1.25rem}.max-w-xl{max-width:36rem}.grid{display:grid}.gap-1{grid-gap:.25rem;gap:.25rem}.font-mono{font-family:Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.bg-gray-100{--bg-opacity:1;background-color:#f4f5f7;background-color:rgba(244,245,247,var(--bg-opacity))}","",{version:3,sources:["webpack://./resources/js/components/profile/TwoFactorAuthentication.vue"],names:[],mappings:"AAiNA,SACA,kBAAA,CACA,mBACA,CACA,aACA,eACA,CACA,SACA,iBAAA,CACA,mBACA,CACA,UACA,eACA,CACA,MACA,YACA,CACA,OACA,eAAA,CACA,UACA,CACA,WACA,uEAEA,CACA,aACA,cAAA,CACA,wBAAA,CACA,oDACA",sourcesContent:['<template>\n  <v-card elevation="3">\n    <v-container>\n      <v-card-title class="text-center"> المصادقة الثنائية </v-card-title>\n      <v-row align-center justify-center>\n        <v-col cols="12" md="4">\n          <v-card-subtitle>\n            أضف أمانًا إضافيًا إلى حسابك باستخدام المصادقة الثنائية\n          </v-card-subtitle>\n        </v-col>\n        <v-col cols="12" md="8">\n          <v-card-text>\n            <h3 class="text-lg font-medium gray--text" v-if="twoFactorEnabled">\n              لقد قمت بتمكين المصادقة الثنائية\n            </h3>\n\n            <h3 class="text-lg font-medium gray--text" v-else>\n              لم تقم بتمكين المصادقة الثنائية\n            </h3>\n\n            <div class="mt-3 max-w-xl text-sm gray--text">\n              <p>\n                عند تمكين المصادقة الثنائية ، ستتم مطالبتك برمز آمن وعشوائي\n                أثناء المصادقة. يمكنك استرداد هذا الرمز المميز من تطبيق Google\n                Authenticator بهاتفك.\n              </p>\n            </div>\n          </v-card-text>\n        </v-col>\n        <v-col cols="12">\n          <v-card-text>\n            <div v-if="twoFactorEnabled">\n              <v-row>\n                <v-col cols="12" md="6" v-if="qrCode">\n                  <div class="mt-4 max-w-xl text-sm gray--text">\n                    <p class="font-semibold">\n                      تم تمكين المصادقة الثنائية الآن. امسح رمز الاستجابة\n                      السريعة التالي ضوئيًا باستخدام تطبيق المصادقة بهاتفك.\n                    </p>\n                  </div>\n\n                  <div\n                    class="mt-4 dark:p-4 dark:w-56 dark:bg-white"\n                    v-html="qrCode"\n                  ></div>\n                </v-col>\n\n                <v-col cols="12" md="6" v-if="recoveryCodes.length > 0">\n                  <div class="mt-4 max-w-xl text-sm gray--text">\n                    <p class="font-semibold">\n                      قم بتخزين رموز الاسترداد هذه في مدير كلمات مرور آمن. يمكن\n                      استخدامها لاستعادة الوصول إلى حسابك في حالة فقد جهاز\n                      المصادقة الثنائية الخاص بك.\n                    </p>\n                  </div>\n\n                  <div\n                    class="grid gap-1 max-w-xl mt-4 px-4 py-4 font-mono text-sm bg-gray-100 rounded-lg"\n                  >\n                    <div v-for="code in recoveryCodes" :key="code">\n                      {{ code }}\n                    </div>\n                  </div>\n                </v-col>\n              </v-row>\n            </div>\n          </v-card-text>\n        </v-col>\n        <v-col>\n          <v-card-actions>\n            <div class="mt-5">\n              <div v-if="!twoFactorEnabled">\n                <ConfirmsPassword @confirmed="enableTwoFactorAuthentication">\n                  <v-btn type="button"  color="primary white--text" :loading="enabling" :disabled="enabling">\n                    تفعيل\n                  </v-btn>\n                </ConfirmsPassword>\n              </div>\n\n              <div v-else>\n                <ConfirmsPassword\n                  @confirmed="regenerateRecoveryCodes"\n                  class="mr-3"\n                >\n                  <v-btn color="accent" dark type="button"  :loading="regenerate"  v-if="recoveryCodes.length > 0">\n                    إعادة إنشاء رموز الاسترداد\n                  </v-btn>\n                </ConfirmsPassword>\n\n                <ConfirmsPassword @confirmed="showRecoveryCodes" class="mr-3">\n                  <v-btn  color="accent" dark type="button" :loading="showRecovery" v-if="recoveryCodes.length == 0">\n                    إظهار رموز الاسترداد\n                  </v-btn>\n                </ConfirmsPassword>\n\n                <ConfirmsPassword\n                  @confirmed="disableTwoFactorAuthentication"\n                  class="mr-3"\n                >\n                  <v-btn\n                    type="button"\n                    color="red"\n                    dark\n                    :loading="disabling"\n\n                  >\n                    تعطيل\n                  </v-btn>\n                </ConfirmsPassword>\n              </div>\n            </div>\n          </v-card-actions>\n        </v-col>\n      </v-row>\n    </v-container>\n  </v-card>\n</template>\n<script>\nimport ConfirmsPassword from "@/components/profile/ConfirmsPassword";\nexport default {\n  components: { ConfirmsPassword },\n  data() {\n    return {\n      enabling: false,\n      disabling: false,\n      regenerate:false,\n      showRecovery:false,\n\n      qrCode: null,\n      recoveryCodes: [],\n    };\n  },\n\n  methods: {\n    enableTwoFactorAuthentication() {\n      this.enabling = true;\n\n      this.$inertia\n        .post(\n          "/user/two-factor-authentication",\n          {},\n          {\n            preserveScroll: true,\n          }\n        )\n        .then(() => {\n          return Promise.all([this.showQrCode(), this.showRecoveryCodes()]);\n        })\n        .then(() => {\n          this.enabling = false;\n        });\n    },\n\n    showQrCode() {\n      return axios.get("/user/two-factor-qr-code").then((response) => {\n        this.qrCode = response.data.svg;\n      });\n    },\n\n    showRecoveryCodes() {\n        this.showRecovery=true\n      return axios.get("/user/two-factor-recovery-codes").then((response) => {\n        this.recoveryCodes = response.data;\n            this.showRecovery = false;\n      });\n    },\n\n    regenerateRecoveryCodes() {\n            this.regenerate = true;\n      axios.post("/user/two-factor-recovery-codes").then((response) => {\n        this.showRecoveryCodes();\n           this.regenerate = false;\n      });\n    },\n\n    disableTwoFactorAuthentication() {\n      this.disabling = true;\n\n      this.$inertia.post("/user/two-factor-authentication",{"_method":"delete"},{\n           preserveScroll: true,\n          onProgress: (progress) => {\n            this.disabling = true;\n          },\n          onSuccess: (page) => {\n            this.disabling = false;\n          },\n           onFinish: () => {\n          this.disabling = false;\n        },\n      })\n\n    //   this.$inertia\n    //     .delete("/user/two-factor-authentication", {\n    //       preserveScroll: true,\n    //     })\n    //     .then(() => {\n    //       this.disabling = false;\n    //     });\n    },\n  },\n\n  computed: {\n    twoFactorEnabled() {\n      return !this.enabling && this.$page.props.user.two_factor_enabled;\n    },\n  },\n};\n<\/script>\n<style>\n.text-lg {\n  font-size: 1.125rem;\n  line-height: 1.75rem;\n}\n.font-medium {\n  font-weight: 500;\n}\n.text-sm {\n  font-size: 0.875rem;\n  line-height: 1.25rem;\n}\n.max-w-xl {\n  max-width: 36rem;\n}\n.grid {\n  display: grid;\n}\n.gap-1 {\n  grid-gap: 0.25rem;\n  gap: 0.25rem;\n}\n.font-mono {\n  font-family: Menlo, Monaco, Consolas, "Liberation Mono", "Courier New",\n    monospace;\n}\n.bg-gray-100 {\n  --bg-opacity: 1;\n  background-color: #f4f5f7;\n  background-color: rgba(244, 245, 247, var(--bg-opacity));\n}\n</style>\n'],sourceRoot:""}]);const i=a},9995:(n,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>l});const o={props:{title:{default:"تاكيدد كلمة المرور"},content:{default:"لحمايتك ، يرجى تأكيد كلمة المرور الخاصة بك للمتابعة."},button:{default:"تاكيد"}},data:function(){return{loading:!1,confirmingPassword:!1,form:{password:"",error:""}}},methods:{startConfirmingPassword:function(){var n=this;this.form.error="",axios.get(route("password.confirmation")).then((function(e){e.data.confirmed?n.$emit("confirmed"):(n.confirmingPassword=!0,n.form.password="")}))},confirmPassword:function(){var n=this;this.loading=!0,axios.post(route("password.confirm"),{password:this.form.password}).then((function(e){n.confirmingPassword=!1,n.form.password="",n.form.error="",n.loading=!1,n.$nextTick((function(){return n.$emit("confirmed")}))})).catch((function(e){n.loading=!1,n.form.error=e.response.data.errors.password[0]}))}}};var r=t(1900);const s={components:{ConfirmsPassword:(0,r.Z)(o,(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("span",[t("span",{on:{click:n.startConfirmingPassword}},[n._t("default")],2),n._v(" "),t("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:n.confirmingPassword,callback:function(e){n.confirmingPassword=e},expression:"confirmingPassword"}},[t("v-card",[t("v-card-title",{staticClass:"headline"},[n._v("\n        "+n._s(n.title)+"\n      ")]),n._v(" "),t("v-card-text",[t("p",[n._v("\n          "+n._s(n.content)+"\n        ")]),n._v(" "),t("v-text-field",{ref:"password",class:{"is-invalid":n.form.error},attrs:{label:"كلمة السر ","append-icon":"fa-key",outlined:"",type:"password",name:"password",error:!!n.form.error,"error-messages":n.form.error},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&n._k(e.keyCode,"enter",13,e.key,"Enter")?null:n.confirmPassword(e)}},model:{value:n.form.password,callback:function(e){n.$set(n.form,"password",e)},expression:"form.password"}})],1),n._v(" "),t("v-card-actions",[t("v-spacer"),n._v(" "),t("v-btn",{attrs:{color:"primary white--text",dark:""},on:{click:function(e){n.confirmingPassword=!1}}},[n._v("\n          لا\n        ")]),n._v(" "),t("v-btn",{attrs:{color:"primary white--text",dark:"",loading:n.loading},on:{click:n.confirmPassword}},[n._v("\n          "+n._s(n.button)+"\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null).exports},data:function(){return{enabling:!1,disabling:!1,regenerate:!1,showRecovery:!1,qrCode:null,recoveryCodes:[]}},methods:{enableTwoFactorAuthentication:function(){var n=this;this.enabling=!0,this.$inertia.post("/user/two-factor-authentication",{},{preserveScroll:!0}).then((function(){return Promise.all([n.showQrCode(),n.showRecoveryCodes()])})).then((function(){n.enabling=!1}))},showQrCode:function(){var n=this;return axios.get("/user/two-factor-qr-code").then((function(e){n.qrCode=e.data.svg}))},showRecoveryCodes:function(){var n=this;return this.showRecovery=!0,axios.get("/user/two-factor-recovery-codes").then((function(e){n.recoveryCodes=e.data,n.showRecovery=!1}))},regenerateRecoveryCodes:function(){var n=this;this.regenerate=!0,axios.post("/user/two-factor-recovery-codes").then((function(e){n.showRecoveryCodes(),n.regenerate=!1}))},disableTwoFactorAuthentication:function(){var n=this;this.disabling=!0,this.$inertia.post("/user/two-factor-authentication",{_method:"delete"},{preserveScroll:!0,onProgress:function(e){n.disabling=!0},onSuccess:function(e){n.disabling=!1},onFinish:function(){n.disabling=!1}})}},computed:{twoFactorEnabled:function(){return!this.enabling&&this.$page.props.user.two_factor_enabled}}};var a=t(3379),i=t.n(a),c=t(1868),d={insert:"head",singleton:!1};i()(c.Z,d);c.Z.locals;const l=(0,r.Z)(s,(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("v-card",{attrs:{elevation:"3"}},[t("v-container",[t("v-card-title",{staticClass:"text-center"},[n._v(" المصادقة الثنائية ")]),n._v(" "),t("v-row",{attrs:{"align-center":"","justify-center":""}},[t("v-col",{attrs:{cols:"12",md:"4"}},[t("v-card-subtitle",[n._v("\n          أضف أمانًا إضافيًا إلى حسابك باستخدام المصادقة الثنائية\n        ")])],1),n._v(" "),t("v-col",{attrs:{cols:"12",md:"8"}},[t("v-card-text",[n.twoFactorEnabled?t("h3",{staticClass:"text-lg font-medium gray--text"},[n._v("\n            لقد قمت بتمكين المصادقة الثنائية\n          ")]):t("h3",{staticClass:"text-lg font-medium gray--text"},[n._v("\n            لم تقم بتمكين المصادقة الثنائية\n          ")]),n._v(" "),t("div",{staticClass:"mt-3 max-w-xl text-sm gray--text"},[t("p",[n._v("\n              عند تمكين المصادقة الثنائية ، ستتم مطالبتك برمز آمن وعشوائي\n              أثناء المصادقة. يمكنك استرداد هذا الرمز المميز من تطبيق Google\n              Authenticator بهاتفك.\n            ")])])])],1),n._v(" "),t("v-col",{attrs:{cols:"12"}},[t("v-card-text",[n.twoFactorEnabled?t("div",[t("v-row",[n.qrCode?t("v-col",{attrs:{cols:"12",md:"6"}},[t("div",{staticClass:"mt-4 max-w-xl text-sm gray--text"},[t("p",{staticClass:"font-semibold"},[n._v("\n                    تم تمكين المصادقة الثنائية الآن. امسح رمز الاستجابة\n                    السريعة التالي ضوئيًا باستخدام تطبيق المصادقة بهاتفك.\n                  ")])]),n._v(" "),t("div",{staticClass:"mt-4 dark:p-4 dark:w-56 dark:bg-white",domProps:{innerHTML:n._s(n.qrCode)}})]):n._e(),n._v(" "),n.recoveryCodes.length>0?t("v-col",{attrs:{cols:"12",md:"6"}},[t("div",{staticClass:"mt-4 max-w-xl text-sm gray--text"},[t("p",{staticClass:"font-semibold"},[n._v("\n                    قم بتخزين رموز الاسترداد هذه في مدير كلمات مرور آمن. يمكن\n                    استخدامها لاستعادة الوصول إلى حسابك في حالة فقد جهاز\n                    المصادقة الثنائية الخاص بك.\n                  ")])]),n._v(" "),t("div",{staticClass:"grid gap-1 max-w-xl mt-4 px-4 py-4 font-mono text-sm bg-gray-100 rounded-lg"},n._l(n.recoveryCodes,(function(e){return t("div",{key:e},[n._v("\n                    "+n._s(e)+"\n                  ")])})),0)]):n._e()],1)],1):n._e()])],1),n._v(" "),t("v-col",[t("v-card-actions",[t("div",{staticClass:"mt-5"},[n.twoFactorEnabled?t("div",[t("ConfirmsPassword",{staticClass:"mr-3",on:{confirmed:n.regenerateRecoveryCodes}},[n.recoveryCodes.length>0?t("v-btn",{attrs:{color:"accent",dark:"",type:"button",loading:n.regenerate}},[n._v("\n                  إعادة إنشاء رموز الاسترداد\n                ")]):n._e()],1),n._v(" "),t("ConfirmsPassword",{staticClass:"mr-3",on:{confirmed:n.showRecoveryCodes}},[0==n.recoveryCodes.length?t("v-btn",{attrs:{color:"accent",dark:"",type:"button",loading:n.showRecovery}},[n._v("\n                  إظهار رموز الاسترداد\n                ")]):n._e()],1),n._v(" "),t("ConfirmsPassword",{staticClass:"mr-3",on:{confirmed:n.disableTwoFactorAuthentication}},[t("v-btn",{attrs:{type:"button",color:"red",dark:"",loading:n.disabling}},[n._v("\n                  تعطيل\n                ")])],1)],1):t("div",[t("ConfirmsPassword",{on:{confirmed:n.enableTwoFactorAuthentication}},[t("v-btn",{attrs:{type:"button",color:"primary white--text",loading:n.enabling,disabled:n.enabling}},[n._v("\n                  تفعيل\n                ")])],1)],1)])])],1)],1)],1)],1)}),[],!1,null,null,null).exports}}]);
//# sourceMappingURL=995.js.map