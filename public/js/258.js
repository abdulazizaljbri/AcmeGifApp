(self.webpackChunk=self.webpackChunk||[]).push([[258],{5258:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const r={props:["user"],components:{Confirm:o(6172).Z},data:function(){return{loading:!1,loading_ph:!1,form:{name:this.user.name,email:this.user.email,photo:null},photoPreview:null}},methods:{updateProfileInformation:function(){var e=this,t=new FormData;t.append("_method","PUT"),t.append("name",this.form.name),t.append("email",this.form.email),this.$refs.photo.files[0]&&(this.form.photo=this.$refs.photo.files[0],t.append("photo",this.$refs.photo.files[0])),this.loading=!0,this.$inertia.post(route("user-profile-information.update"),t,{preserveScroll:!0,onProgress:function(t){e.loading=!0},onSuccess:function(t){e.loading=!1},onFinish:function(){e.loading=!1}})},selectNewPhoto:function(){this.$refs.photo.click()},updatePhotoPreview:function(){var e=this,t=new FileReader;t.onload=function(t){e.photoPreview=t.target.result},t.readAsDataURL(this.$refs.photo.files[0])},open:function(){var e=this;this.$refs.confirm.open("حذف","هل تريد حذف الصورة الشخصية",{color:"red"}).then((function(t){t&&e.deletePhoto()}))},deletePhoto:function(){var e=this;this.loading_ph=!0,this.$inertia.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onProgress:function(t){e.loading_ph=!0},onSuccess:function(t){e.hasErrors()||(e.photoPreview=null),e.loading_ph=!1},onFinish:function(){e.loading=!1}})}}};const n=(0,o(1900).Z)(r,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-card",{attrs:{elevation:"3"}},[o("v-container",[o("v-card-subtitle",{staticClass:"text-center"},[e._v("\n      تعديل البيانات الشخصية\n    ")]),e._v(" "),o("form",{on:{submit:function(t){return t.preventDefault(),e.updateProfileInformation(t)}}},[o("v-row",{attrs:{align:"center"}},[o("v-col",{attrs:{cols:"12",sm:"8",order:"2","order-sm":"1"}},[o("c-text-field",{attrs:{name:"name",label:"اسم المستخدم","append-icon":"fa-user"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e._v(" "),o("c-text-field",{attrs:{type:"email",name:"email",label:"البريد الالكتروني","append-icon":"fa-envelope"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),o("v-col",{attrs:{cols:"12",sm:"4",order:"1","order-sm":"2"}},[o("div",{staticClass:"d-flex justify-center align-center flex-column flex-wrap"},[o("div",{staticClass:"flex-grow-1"},[o("input",{ref:"photo",staticClass:"d-none",attrs:{type:"file",accept:"image/*"},on:{change:e.updatePhotoPreview}}),e._v(" "),o("v-avatar",{attrs:{color:"black",size:"200"}},[e.user.profile_photo_url&&!e.photoPreview?o("v-img",{staticClass:"img-fluid",attrs:{contain:"",src:""+e.user.profile_photo_url,maxHeight:"200",maxWidth:"200"}}):e._e(),e._v(" "),e.photoPreview?o("v-img",{ref:"mylogo",staticClass:"img-fluid",attrs:{contain:"",src:e.photoPreview,maxHeight:"250",maxWidth:"250"}}):e._e()],1),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.errorFor("photo","default"),expression:"errorFor('photo', 'default')"}],staticClass:"my-2"}),e._v(" "),o("p",{staticClass:"text-sm red--text"},[e._v("\n                "+e._s(e.errorFor("photo","default"))+"\n              ")])],1)]),e._v(" "),o("div",{staticClass:"d-flex flex-wrap justify-center"},[o("v-btn",{staticClass:"ma-2",attrs:{type:"button",color:"primary white--text"},on:{click:function(t){return t.preventDefault(),e.selectNewPhoto(t)}}},[e._v("\n              اختيار صورة\n            ")]),e._v(" "),e.user.profile_photo_path?o("v-btn",{staticClass:"ma-2",attrs:{type:"button",loading:e.loading_ph,color:"red",dark:""},on:{click:function(t){return t.preventDefault(),e.open(t)}}},[e._v("\n              حذف الصورة\n            ")]):e._e()],1)])],1),e._v(" "),o("v-card-actions",[o("v-btn",{staticClass:"white--text",attrs:{type:"submit",disabled:e.loading,loading:e.loading,color:"primary"}},[e._v("\n          تعديل\n        ")])],1)],1)],1),e._v(" "),o("confirm",{ref:"confirm"})],1)}),[],!1,null,null,null).exports}}]);
//# sourceMappingURL=258.js.map